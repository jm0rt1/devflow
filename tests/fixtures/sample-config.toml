# Sample devflow configuration
# This demonstrates the full configuration surface

[tool.devflow]
venv_dir = ".venv"
default_python = "python3.11"
build_backend = "build"      # "build" vs "hatchling" vs "poetry-build"
test_runner = "pytest"
package_index = "pypi"       # or "testpypi"
auto_discover_tasks = false

[tool.devflow.paths]
dist_dir = "dist"
tests_dir = "tests"
src_dir = "src"

[tool.devflow.publish]
repository = "pypi"
sign = false
tag_on_publish = false
tag_format = "v{version}"
tag_prefix = ""
require_clean_working_tree = true

[tool.devflow.deps]
requirements = "requirements.txt"
dev_requirements = "requirements-dev.txt"
freeze_output = "requirements-freeze.txt"

# Example task definitions

[tool.devflow.tasks.test]
command = "pytest"
args = ["-q"]
use_venv = true

[tool.devflow.tasks.build]
command = "python"
args = ["-m", "build"]
use_venv = true

[tool.devflow.tasks.publish]
steps = ["build", "upload"]

[tool.devflow.tasks.upload]
command = "twine"
args = ["upload", "dist/*"]
use_venv = true

[tool.devflow.tasks.ci-check]
pipeline = ["format", "lint", "test"]

[tool.devflow.tasks.format]
command = "ruff"
args = ["format"]

[tool.devflow.tasks.lint]
command = "ruff"
args = ["check", "."]
